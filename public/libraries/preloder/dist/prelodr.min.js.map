{"version":3,"file":"prelodr.min.js","sources":["../node_modules/object-assign/index.js","../node_modules/seqr/dist/seqr.js","../node_modules/quesk/dist/quesk.js","../node_modules/emitus/dist/emitus.js","../index.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar quesk = _interopDefault(require('quesk'));\n\nfunction seqr () {\n  var queue = quesk();\n  var api = {};\n\n  api.then = function (fn) {\n    if (fn && typeof fn === 'function') {\n      queue.append({\n        fn: fn,\n        lock: false\n      });\n    }\n\n    next(queue.first());\n\n    return api\n  };\n\n  return api\n\n  function next (el) {\n    if (el && !el.lock) {\n      el.lock = true;\n      el.fn(done);\n    }\n  }\n\n  function done () {\n    var el = queue.first();\n\n    if (el && el.lock) {\n      queue.shift();\n      next(queue.first());\n    }\n  }\n}\n\nmodule.exports = seqr;\n//# sourceMappingURL=seqr.js.map\n","/*       */\n\nfunction quesk () {\n  var queue               = [];\n\n  return {\n    append: function append (el     )         {\n      return queue.push(el)\n    },\n\n    prepend: function prepend (el     )         {\n      return queue.unshift(el)\n    },\n\n    pop: function pop ()      {\n      return queue.pop()\n    },\n\n    shift: function shift ()      {\n      queue.shift();\n    },\n\n    first: function first ()      {\n      return queue[0]\n    },\n\n    last: function last ()      {\n      return queue.slice(-1)[0]\n    },\n\n    all: function all ()               {\n      return queue\n    },\n\n    length: function length ()         {\n      return queue.length\n    }\n  }\n}\n\nmodule.exports = quesk;\n//# sourceMappingURL=quesk.js.map\n","'use strict';\n\nfunction emitus (api) {\n  if ( api === void 0 ) api = {};\n\n  var events = {};\n\n  return Object.assign(\n    {\n      on: function on (type, fn) {\n        (events[type] || (events[type] = [])).push(fn);\n      },\n      off: function off (type, fn) {\n        if ( fn === void 0 ) fn = null;\n\n        if (events[type]) {\n          events[type].splice(events[type].indexOf(fn), 1);\n        }\n      },\n      emit: function emit (type, args) {\n        var this$1 = this;\n        if ( args === void 0 ) args = [];\n\n        (events[type] || []).map(function (fn) {\n          if (fn && typeof fn === 'function') { fn.apply(this$1, args); }\n        });\n      }\n    },\n    api\n  )\n}\n\nmodule.exports = emitus;\n//# sourceMappingURL=emitus.js.map\n","import Seqr from 'seqr'\nimport Emitus from 'emitus'\n\nexport default function prelodr (options = {}) {\n  let defaults = Object.assign(\n    {\n      container: document.body,\n      duration: 750,\n      zIndex: 100,\n      auto: false,\n      text: 'Loading...',\n      prefixClass: 'prelodr'\n    },\n    options\n  )\n\n  const emitter = Emitus({\n    show,\n    hide,\n    setText,\n    getElement,\n    setPrefixClass,\n    setDuration,\n    setZIndex\n  })\n\n  const seqr = Seqr()\n  let cls = getClasses()\n\n  const wrapper = el()\n  wrapper.className = `${cls.prefix} ${cls.hide}`\n  wrapper.innerHTML = `<span><span><span class=\"${cls.text}\">${defaults.text}</span><span class=\"${cls.progressbar}\"></span></span></span>`\n\n  const spanText = find(`.${cls.text}`)\n  const spanProgressbar = find(`.${cls.progressbar}`)\n\n  defaults.container.appendChild(wrapper)\n\n  if (defaults.auto) show(defaults.text)\n\n  setZIndex(defaults.zIndex)\n\n  return emitter\n\n  function show (str) {\n    seqr.then(done => {\n      setText(str)\n\n      wrapper.classList.remove(cls.hide)\n\n      setTimeout(() => {\n        spanText.classList.add(cls.in)\n        wrapper.classList.add(cls.in)\n      }, 10)\n\n      setTimeout(() => {\n        emitter.emit('shown')\n        done()\n      }, defaults.duration)\n    })\n\n    return emitter\n  }\n\n  function hide (fn) {\n    seqr.then(done => {\n      spanText.classList.remove(cls.in)\n      wrapper.classList.remove(cls.in)\n\n      setTimeout(() => {\n        wrapper.classList.add(cls.hide)\n\n        if (fn) fn(done)\n        else done()\n\n        emitter.emit('hidden')\n      }, defaults.duration)\n    })\n\n    return emitter\n  }\n\n  function setText (str) {\n    if (!str && defaults.text) str = defaults.text\n\n    defaults.text = str\n    spanText.innerHTML = str\n\n    return emitter\n  }\n\n  function getElement () {\n    return wrapper\n  }\n\n  function setDuration (duration) {\n    defaults.duration = duration\n  }\n\n  function setZIndex (zindex) {\n    defaults.zIndex = zindex\n    wrapper.style.zIndex = zindex\n  }\n\n  function setPrefixClass (prefix) {\n    defaults.prefixClass = prefix\n    updateClasses()\n  }\n\n  function updateClasses () {\n    const from = cls\n\n    cls = getClasses()\n    replaceClass(wrapper, from.prefix, cls.prefix)\n    replaceClass(spanText, from.text, cls.text)\n    replaceClass(spanProgressbar, from.progressbar, cls.progressbar)\n  }\n\n  function getClasses () {\n    return {\n      prefix: defaults.prefixClass,\n      in: `${defaults.prefixClass}-in`,\n      hide: `${defaults.prefixClass}-hide`,\n      text: `${defaults.prefixClass}-text`,\n      progressbar: `${defaults.prefixClass}-progressbar`\n    }\n  }\n\n  function el (tag = 'span') {\n    return document.createElement(tag)\n  }\n\n  function find (q) {\n    return wrapper.querySelector(q)\n  }\n\n  function replaceClass (elem, from, to) {\n    elem.classList.remove(from)\n    elem.classList.add(to)\n  }\n}\n"],"names":["toObject","val","undefined","TypeError","Object","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","target","source","from","symbols","to","s","arguments","length","key","call","quesk","ex","queue","append","el","push","prepend","unshift","pop","shift","first","last","slice","all","next","lock","fn","done","api","then","events","Object.assign","on","type","off","splice","indexOf","emit","args","this$1","this","apply","options","show","str","seqr","setText","wrapper","classList","remove","cls","hide","setTimeout","spanText","add","in","emitter","defaults","duration","text","innerHTML","setZIndex","zindex","zIndex","style","updateClasses","const","getClasses","replaceClass","prefix","spanProgressbar","progressbar","prefixClass","find","q","querySelector","elem","let","container","document","body","auto","Emitus","getElement","setPrefixClass","setDuration","Seqr","tag","createElement","className","appendChild"],"mappings":"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"}